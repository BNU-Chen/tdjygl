/*
 * File: app/view/infoArticlePublishTab.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.infoArticlePublishTab', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.infoArticlePublishTab',

    requires: [
        'Ext.form.Panel',
        'Ext.form.field.HtmlEditor',
        'Ext.form.field.Text',
        'Ext.button.Button'
    ],

    title: '文章发表',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    height: 391,
                    id: 'articleDetailForm',
                    layout: 'absolute',
                    anchorSize: 100,
                    bodyPadding: 10,
                    title: 'My Form',
                    jsonSubmit: true,
                    dockedItems: [
                        {
                            xtype: 'htmleditor',
                            x: 20,
                            y: 130,
                            dock: 'bottom',
                            weight: 1,
                            height: 240,
                            fieldLabel: '',
                            name: 'articleContent'
                        }
                    ],
                    items: [
                        {
                            xtype: 'textfield',
                            fieldLabel: '文章名称',
                            name: 'articleName'
                        },
                        {
                            xtype: 'textfield',
                            x: 10,
                            y: 40,
                            fieldLabel: '文章作者',
                            name: 'articleAuthor'
                        },
                        {
                            xtype: 'textfield',
                            x: 350,
                            y: 70,
                            fieldLabel: '跳转URL',
                            name: 'articleUrl'
                        },
                        {
                            xtype: 'textfield',
                            x: 350,
                            y: 40,
                            fieldLabel: '发布时间',
                            name: 'articlePublishtime',
                            inputType: 'date'
                        },
                        {
                            xtype: 'textfield',
                            anchor: '',
                            x: 350,
                            y: 10,
                            fieldLabel: '来源地址',
                            name: 'articleSourceaddress'
                        },
                        {
                            xtype: 'textfield',
                            x: 10,
                            y: 100,
                            fieldLabel: '文章来源',
                            name: 'articleSource'
                        },
                        {
                            xtype: 'textfield',
                            x: 10,
                            y: 70,
                            fieldLabel: '频道栏目',
                            name: 'channelId'
                        },
                        {
                            xtype: 'button',
                            handler: function(button, event) {
                                var form = this.up('form').getForm(); // get the basic form
                                if (form.isValid()) { // make sure the form contains valid data before submitting
                                    form.submit({
                                        url:'add_infoArticle',
                                        success: function(form, action) {

                                            Ext.Msg.alert('Success', action.result.msg);
                                        },
                                        failure: function(form, action) {
                                            Ext.Msg.alert('Failed', action.result.msg);
                                        }
                                    });
                                } else { // display error alert if the data is invalid
                                Ext.Msg.alert('Invalid Data', 'Please correct form errors.');}
                            },
                            x: 350,
                            y: 100,
                            text: '发表文章'
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

});