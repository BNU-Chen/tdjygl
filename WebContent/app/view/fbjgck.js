/*
 * File: app/view/fbjgck.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.fbjgck', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.fbjgck',

    requires: [
        'Ext.grid.RowNumberer',
        'Ext.grid.column.Date',
        'Ext.grid.View',
        'Ext.Img',
        'Ext.form.Label',
        'Ext.toolbar.Paging'
    ],

    height: 685,
    width: 901,
    title: '<font size=\'2.5px\'>指标申购列表</font>',
    store: 'zbgglbstore',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            columns: [
                {
                    xtype: 'rownumberer',
                    width: 38,
                    align: 'center',
                    text: '序号'
                },
                {
                    xtype: 'gridcolumn',
                    align: 'center',
                    dataIndex: 'zbpcbh',
                    text: '指标批次编号'
                },
                {
                    xtype: 'gridcolumn',
                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                        return value+'公顷/个';
                    },
                    width: 73,
                    align: 'center',
                    dataIndex: 'dwed',
                    text: '单位额度'
                },
                {
                    xtype: 'gridcolumn',
                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                        return value+'张';
                    },
                    width: 59,
                    align: 'center',
                    dataIndex: 'sl',
                    text: '数量'
                },
                {
                    xtype: 'gridcolumn',
                    width: 85,
                    align: 'center',
                    dataIndex: 'jylx',
                    text: '交易类型'
                },
                {
                    xtype: 'gridcolumn',
                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                        return value+'万元/张';
                    },
                    width: 72,
                    align: 'center',
                    dataIndex: 'dj',
                    text: '底价'
                },
                {
                    xtype: 'datecolumn',
                    align: 'center',
                    dataIndex: 'sqjzrq',
                    text: '申请截止日期'
                },
                {
                    xtype: 'datecolumn',
                    align: 'center',
                    dataIndex: 'jjksrq',
                    text: '竞价开始日期'
                },
                {
                    xtype: 'datecolumn',
                    width: 90,
                    align: 'center',
                    dataIndex: 'jjjsrq',
                    text: '竞价结束日期'
                },
                {
                    xtype: 'gridcolumn',
                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                        return "<button style='background-color:dodgerblue;color:white'>预订</button>";
                    },
                    align: 'center',
                    text: '操作'
                }
            ],
            viewConfig: {
                cls: 'x-grid3-row',
                listeners: {
                    cellclick: {
                        fn: me.onViewCellClick,
                        scope: me
                    }
                }
            },
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    height: 44,
                    items: [
                        {
                            xtype: 'image',
                            height: 33,
                            width: 527,
                            src: 'images/step1.png'
                        },
                        {
                            xtype: 'label',
                            style: {
                                fontSize: '12px',
                                cursor: 'pointer',
                                color: 'blue'
                            },
                            width: 100,
                            text: '指标发布',
                            listeners: {
                                click: {
                                    fn: me.onLabelClick1,
                                    element: 'el',
                                    scope: me
                                }
                            }
                        }
                    ]
                },
                {
                    xtype: 'pagingtoolbar',
                    dock: 'bottom',
                    width: 360,
                    displayInfo: true,
                    store: 'zbgglbstore'
                }
            ]
        });

        me.callParent(arguments);
    },

    onViewCellClick: function(tableview, td, cellIndex, record, tr, rowIndex, e, eOpts) {
        if(cellIndex==9)
        {
            Ext.MessageBox.alert('提示','您的登录身份为管理者不能进行预订，请已普通用户身份登录');
        }
    },

    onLabelClick1: function(label) {
        var myTabPanel = Ext.getCmp('htglTabPanelMain');
        myTabPanel.removeAll(true);
        myTabPanel.add(Ext.widget('zblbfb'));

    }

});